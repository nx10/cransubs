import{s as se,n as T,c as B,o as ne,i as ae}from"../chunks/scheduler.CFavEI7j.js";import{S as ie,i as oe,s as S,e as E,p as F,k as re,d as p,f as U,c as I,a as V,l as z,q as O,m as v,g as y,h as f,r as G,u as te,t as q,b as D,n as ue,j,v as le,o as J}from"../chunks/index.PlDuVgLQ.js";import{h as K,u as ce,s as fe,i as H,p as Q}from"../chunks/stores.DnwLM7b_.js";import{b as L}from"../chunks/paths.3t9Y-u67.js";import{p as W}from"../chunks/stores.DQfFMN-Y.js";function R(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function X(n,e,t){const a=n.slice();return a[9]=e[t],a}function Y(n,e,t){const a=n.slice();return a[12]=e[t],a[14]=t,a}function he(n){let e,t=n[15].message+"",a;return{c(){e=E("p"),a=q(t),this.h()},l(u){e=I(u,"P",{style:!0});var r=V(e);a=D(r,t),r.forEach(p),this.h()},h(){ue(e,"color","red")},m(u,r){y(u,e,r),f(e,a)},p(u,r){r&4&&t!==(t=u[15].message+"")&&j(a,t)},d(u){u&&p(e)}}}function de(n){let e,t,a,u=`<a href="${L}/about" class="my-4">About this page</a>`,r,s,c,g=H(n[8].capture_time)+"",k,h,b=n[8].capture_duration/1e3+"",C,N,A=n[8].update_interval/60+"",_,x,d=R(n[8].queues),i=[];for(let l=0;l<d.length;l+=1)i[l]=ee(X(n,d,l));let o=null;return d.length||(o=Z()),{c(){for(let l=0;l<i.length;l+=1)i[l].c();o&&o.c(),e=S(),t=E("div"),a=E("span"),a.innerHTML=u,r=S(),s=E("span"),c=q("Updated "),k=q(g),h=q(" in "),C=q(b),N=q(` seconds. Updating
				every `),_=q(A),x=q(" minutes."),this.h()},l(l){for(let P=0;P<i.length;P+=1)i[P].l(l);o&&o.l(l),e=U(l),t=I(l,"DIV",{class:!0});var w=V(t);a=I(w,"SPAN",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-90mfgm"&&(a.innerHTML=u),r=U(w),s=I(w,"SPAN",{class:!0});var m=V(s);c=D(m,"Updated "),k=D(m,g),h=D(m," in "),C=D(m,b),N=D(m,` seconds. Updating
				every `),_=D(m,A),x=D(m," minutes."),m.forEach(p),w.forEach(p),this.h()},h(){v(a,"class","hover:underline text-slate-600"),v(s,"class","float-right text-sm font-light"),v(t,"class","text-slate-500 my-4")},m(l,w){for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(l,w);o&&o.m(l,w),y(l,e,w),y(l,t,w),f(t,a),f(t,r),f(t,s),f(s,c),f(s,k),f(s,h),f(s,C),f(s,N),f(s,_),f(s,x)},p(l,w){if(w&14){d=R(l[8].queues);let m;for(m=0;m<d.length;m+=1){const P=X(l,d,m);i[m]?i[m].p(P,w):(i[m]=ee(P),i[m].c(),i[m].m(e.parentNode,e))}for(;m<i.length;m+=1)i[m].d(1);i.length=d.length,!d.length&&o?o.p(l,w):d.length?o&&(o.d(1),o=null):(o=Z(),o.c(),o.m(e.parentNode,e))}w&4&&g!==(g=H(l[8].capture_time)+"")&&j(k,g),w&4&&b!==(b=l[8].capture_duration/1e3+"")&&j(C,b),w&4&&A!==(A=l[8].update_interval/60+"")&&j(_,A)},d(l){l&&(p(e),p(t)),le(i,l),o&&o.d(l)}}}function Z(n){let e,t="No submissions match the search query.";return{c(){e=E("p"),e.textContent=t,this.h()},l(a){e=I(a,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-14j46sp"&&(e.textContent=t),this.h()},h(){v(e,"class","text-slate-800")},m(a,u){y(a,e,u)},p:T,d(a){a&&p(e)}}}function pe(n){let e,t,a,u=n[9].queue.length-10+"",r,s,c,g;return{c(){e=E("div"),t=E("div"),a=q("Show "),r=q(u),s=q(" more..."),this.h()},l(k){e=I(k,"DIV",{class:!0});var h=V(e);t=I(h,"DIV",{class:!0});var b=V(t);a=D(b,"Show "),r=D(b,u),s=D(b," more..."),b.forEach(p),h.forEach(p),this.h()},h(){v(t,"class","text-slate-600 py-1"),v(e,"class","flex flex-row space-x-1 items-center justify-center hover:bg-slate-200 odd:bg-white even:bg-slate-50 cursor-pointer")},m(k,h){y(k,e,h),f(e,t),f(t,a),f(t,r),f(t,s),c||(g=te(e,"click",function(){ae(n[3](n[9]))&&n[3](n[9]).apply(this,arguments)},{once:!0}),c=!0)},p(k,h){n=k,h&4&&u!==(u=n[9].queue.length-10+"")&&j(r,u)},d(k){k&&p(e),c=!1,g()}}}function _e(n){let e,t,a,u=(n[12].original_position??n[14]+1)+"",r,s,c,g=n[12].pkg_name+"",k,h,b,C=n[12].pkg_version+"",N,A,_,x=H(n[12].file_time)+"",d,i;return{c(){e=E("a"),t=E("div"),a=q("#"),r=q(u),s=S(),c=E("div"),k=q(g),h=S(),b=E("div"),N=q(C),A=S(),_=E("div"),d=q(x),this.h()},l(o){e=I(o,"A",{href:!0,class:!0});var l=V(e);t=I(l,"DIV",{class:!0});var w=V(t);a=D(w,"#"),r=D(w,u),w.forEach(p),s=U(l),c=I(l,"DIV",{class:!0});var m=V(c);k=D(m,g),m.forEach(p),h=U(l),b=I(l,"DIV",{class:!0});var P=V(b);N=D(P,C),P.forEach(p),A=U(l),_=I(l,"DIV",{class:!0});var M=V(_);d=D(M,x),M.forEach(p),l.forEach(p),this.h()},h(){v(t,"class","font-light text-sm w-14 text-slate-500"),v(c,"class","text-slate-900"),v(b,"class","text-sm text-slate-500 flex-auto"),v(_,"class","text-sm font-light"),v(e,"href",i=L+Q(n[12])),v(e,"class","flex flex-row space-x-1 items-center hover:bg-slate-200 odd:bg-white even:bg-slate-50 px-2 py-1 first:rounded-t-md last:rounded-b-md")},m(o,l){y(o,e,l),f(e,t),f(t,a),f(t,r),f(e,s),f(e,c),f(c,k),f(e,h),f(e,b),f(b,N),f(e,A),f(e,_),f(_,d)},p(o,l){l&4&&u!==(u=(o[12].original_position??o[14]+1)+"")&&j(r,u),l&4&&g!==(g=o[12].pkg_name+"")&&j(k,g),l&4&&C!==(C=o[12].pkg_version+"")&&j(N,C),l&4&&x!==(x=H(o[12].file_time)+"")&&j(d,x),l&4&&i!==(i=L+Q(o[12]))&&v(e,"href",i)},d(o){o&&p(e)}}}function $(n){let e,t;function a(s,c){if(c&6&&(e=null),e==null&&(e=s[1].indexOf(s[9])!==-1||s[14]<5||s[14]>s[9].queue.length-6),e)return _e;if(s[14]==5)return pe}let u=a(n,-1),r=u&&u(n);return{c(){r&&r.c(),t=J()},l(s){r&&r.l(s),t=J()},m(s,c){r&&r.m(s,c),y(s,t,c)},p(s,c){u===(u=a(s,c))&&r?r.p(s,c):(r&&r.d(1),r=u&&u(s),r&&(r.c(),r.m(t.parentNode,t)))},d(s){s&&p(t),r&&r.d(s)}}}function ee(n){let e,t,a=n[9].info.name+"",u,r,s,c=n[9].queue.length+"",g,k,h,b,C=n[9].info.description+"",N,A,_,x=R(n[9].queue),d=[];for(let i=0;i<x.length;i+=1)d[i]=$(Y(n,x,i));return{c(){e=E("div"),t=E("div"),u=q(a),r=S(),s=E("div"),g=q(c),k=q(" packages"),h=S(),b=E("p"),N=q(C),A=S(),_=E("div");for(let i=0;i<d.length;i+=1)d[i].c();this.h()},l(i){e=I(i,"DIV",{class:!0});var o=V(e);t=I(o,"DIV",{class:!0});var l=V(t);u=D(l,a),l.forEach(p),r=U(o),s=I(o,"DIV",{class:!0});var w=V(s);g=D(w,c),k=D(w," packages"),w.forEach(p),o.forEach(p),h=U(i),b=I(i,"P",{class:!0});var m=V(b);N=D(m,C),m.forEach(p),A=U(i),_=I(i,"DIV",{class:!0});var P=V(_);for(let M=0;M<d.length;M+=1)d[M].l(P);P.forEach(p),this.h()},h(){v(t,"class","flex-auto text-2xl font-bold"),v(s,"class","text-slate-500"),v(e,"class","flex flex-row space-x-1 items-end pt-3 mb-1"),v(b,"class","italic text-sm text-slate-600"),v(_,"class","flex flex-col border border-slate-300 rounded-md mt-2")},m(i,o){y(i,e,o),f(e,t),f(t,u),f(e,r),f(e,s),f(s,g),f(s,k),y(i,h,o),y(i,b,o),f(b,N),y(i,A,o),y(i,_,o);for(let l=0;l<d.length;l+=1)d[l]&&d[l].m(_,null)},p(i,o){if(o&4&&a!==(a=i[9].info.name+"")&&j(u,a),o&4&&c!==(c=i[9].queue.length+"")&&j(g,c),o&4&&C!==(C=i[9].info.description+"")&&j(N,C),o&14){x=R(i[9].queue);let l;for(l=0;l<x.length;l+=1){const w=Y(i,x,l);d[l]?d[l].p(w,o):(d[l]=$(w),d[l].c(),d[l].m(_,null))}for(;l<d.length;l+=1)d[l].d(1);d.length=x.length}},d(i){i&&(p(e),p(h),p(b),p(A),p(_)),le(d,i)}}}function ve(n){let e,t="Fetching snapshot...";return{c(){e=E("p"),e.textContent=t},l(a){e=I(a,"P",{"data-svelte-h":!0}),z(e)!=="svelte-13nyggy"&&(e.textContent=t)},m(a,u){y(a,e,u)},p:T,d(a){a&&p(e)}}}function me(n){let e,t,a,u='<div class="text-3xl font-bold pr-2 text-slate-600 text-center mb-5 mt-4">CRAN submission tracker</div>',r,s,c,g,k,h,b,C,N,A,_={ctx:n,current:null,token:null,hasCatch:!0,pending:ve,then:de,catch:he,value:8,error:15};return K(C=n[2],_),{c(){e=S(),t=E("main"),a=E("a"),a.innerHTML=u,r=S(),s=E("div"),c=F("svg"),g=F("path"),k=S(),h=E("input"),b=S(),_.block.c(),this.h()},l(x){re("svelte-1i7kshk",document.head).forEach(p),e=U(x),t=I(x,"MAIN",{class:!0});var i=V(t);a=I(i,"A",{href:!0,"data-svelte-h":!0}),z(a)!=="svelte-4zpjwh"&&(a.innerHTML=u),r=U(i),s=I(i,"DIV",{class:!0});var o=V(s);c=O(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=V(c);g=O(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),V(g).forEach(p),l.forEach(p),k=U(o),h=I(o,"INPUT",{type:!0,placeholder:!0,class:!0}),o.forEach(p),b=U(i),_.block.l(i),i.forEach(p),this.h()},h(){document.title="CRAN sub tracker",v(a,"href",L+"/"),v(g,"stroke-linecap","round"),v(g,"stroke-linejoin","round"),v(g,"stroke-width",2),v(g,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),v(c,"xmlns","http://www.w3.org/2000/svg"),v(c,"class","absolute top-0 bottom-0 w-6 h-6 my-auto text-gray-400 left-3"),v(c,"fill","none"),v(c,"viewBox","0 0 24 24"),v(c,"stroke","currentColor"),v(h,"type","text"),v(h,"placeholder","Search"),v(h,"class","w-full py-3 pl-12 pr-4 text-slate-500 border rounded-md outline-none bg-gray-50 focus:text-slate-900 focus:bg-white focus:border-slate-500"),v(s,"class","relative mt-3"),v(t,"class","my-0 mx-auto max-w-3xl px-2")},m(x,d){y(x,e,d),y(x,t,d),f(t,a),f(t,r),f(t,s),f(s,c),f(c,g),f(s,k),f(s,h),G(h,n[0]),f(t,b),_.block.m(t,_.anchor=null),_.mount=()=>t,_.anchor=null,N||(A=te(h,"input",n[5]),N=!0)},p(x,[d]){n=x,d&1&&h.value!==n[0]&&G(h,n[0]),_.ctx=n,d&4&&C!==(C=n[2])&&K(C,_)||ce(_,n,d)},i:T,o:T,d(x){x&&(p(e),p(t)),_.block.d(),_.token=null,_=null,N=!1,A()}}}function ge(n,e,t){let a,u,r;B(n,fe,h=>t(4,u=h)),B(n,W,h=>t(6,r=h));let s=decodeURIComponent(r.url.hash.substring(1))||"";ne(W.subscribe(h=>{t(0,s=decodeURIComponent(h.url.hash.substring(1))||s)}));let c=[];function g(h){return()=>{c.push(h),t(1,c)}}function k(){s=this.value,t(0,s)}return n.$$.update=()=>{n.$$.dirty&17&&t(2,a=u.then(h=>h.filter(s)))},[s,c,a,g,u,k]}class Ie extends ie{constructor(e){super(),oe(this,e,ge,me,se,{})}}export{Ie as component};
